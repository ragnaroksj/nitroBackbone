// Underscore.string
// (c) 2010 Esa-Matti Suuronen <esa-matti aet suuronen dot org>
// Underscore.strings is freely distributable under the terms of the MIT license.
// Documentation: https://github.com/epeli/underscore.string
// Some code is borrowed from MooTools and Alexandru Marasteanu.
// Version 2.2.0rc
(function(e){"use strict";var t=String.prototype.trim,n=String.prototype.trimRight,r=String.prototype.trimLeft,i=function(e){return e*1||0},s=function(e,t,n){e+="";t=~~t;for(var r=[];t>0;r[--t]=e);return r.join(n==null?"":n)},o=function(e){return Array.prototype.slice.call(e)},u=function(e){return e!=null?"["+h.escapeRegExp(""+e)+"]":"\\s"},a={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},f={};for(var l in a)f[a[l]]=l;var c=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=s,n=function(){n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0]));return n.format.call(null,n.cache[arguments[0]],arguments)};n.format=function(n,r){var i=1,s=n.length,o="",u,a=[],f,l,h,p,d,v;for(f=0;f<s;f++){o=e(n[f]);if(o==="string")a.push(n[f]);else if(o==="array"){h=n[f];if(h[2]){u=r[i];for(l=0;l<h[2].length;l++){if(!u.hasOwnProperty(h[2][l]))throw new Error(c('[_.sprintf] property "%s" does not exist',h[2][l]));u=u[h[2][l]]}}else h[1]?u=r[h[1]]:u=r[i++];if(/[^s]/.test(h[8])&&e(u)!="number")throw new Error(c("[_.sprintf] expecting number but found %s",e(u)));switch(h[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=h[7]?u.toExponential(h[7]):u.toExponential();break;case"f":u=h[7]?parseFloat(u).toFixed(h[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&h[7]?u.substring(0,h[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(h[8])&&h[3]&&u>=0?"+"+u:u;d=h[4]?h[4]=="0"?"0":h[4].charAt(1):" ";v=h[6]-String(u).length;p=h[6]?t(d,v):"";a.push(h[5]?u+p:p+u)}}return a.join("")};n.cache={};n.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r};return n}(),h={VERSION:"2.2.0rc",isBlank:function(e){return/^\s*$/.test(e)},stripTags:function(e){return(""+e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){e+="";return e.charAt(0).toUpperCase()+e.substring(1)},chop:function(e,t){e+="";t=~~t||e.length;var n=[];for(var r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},clean:function(e){return h.strip(e).replace(/\s+/g," ")},count:function(e,t){e+="";t+="";return e.split(t).length-1},chars:function(e){return(""+e).split("")},escapeHTML:function(e){return(""+e).replace(/[&<>"']/g,function(e){return"&"+f[e]+";"})},unescapeHTML:function(e){return(""+e).replace(/\&([^;]+);/g,function(e,t){var n;return t in a?a[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e})},escapeRegExp:function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(e,t,n){var r=h.chars(e);r.splice(~~t,0,""+n);return r.join("")},include:function(e,t){return!!~(""+e).indexOf(t)},join:function(){var e=o(arguments);return e.join(e.shift())},lines:function(e){return(""+e).split("\n")},reverse:function(e){return h.chars(e).reverse().join("")},splice:function(e,t,n,r){var i=h.chars(e);i.splice(~~t,~~n,r);return i.join("")},startsWith:function(e,t){e+="";t+="";return e.length>=t.length&&e.substring(0,t.length)===t},endsWith:function(e,t){e+="";t+="";return e.length>=t.length&&e.substring(e.length-t.length)===t},succ:function(e){e+="";var t=h.chars(e);t.splice(e.length-1,1,String.fromCharCode(e.charCodeAt(e.length-1)+1));return t.join("")},titleize:function(e){return(""+e).replace(/\b./g,function(e){return e.toUpperCase()})},camelize:function(e){return h.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t&&t.toUpperCase()})},underscored:function(e){return h.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return h.trim(e).replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},classify:function(e){e+="";return h.titleize(e.replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return h.capitalize(this.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,n){e+="";if(!n&&t)return t.call(e);n=u(n);return e.replace(new RegExp("^"+n+"+|"+n+"+$","g"),"")},ltrim:function(e,t){e+="";if(!t&&r)return r.call(e);t=u(t);return e.replace(new RegExp("^"+t+"+"),"")},rtrim:function(e,t){e+="";if(!t&&n)return n.call(e);t=u(t);return e.replace(new RegExp(t+"+$"),"")},truncate:function(e,t,n){e+="";n=n||"...";t=~~t;return e.length>t?e.slice(0,t)+n:e},prune:function(e,t,n){e+="";t=~~t;n=n!=null?""+n:"...";var r,i,s=e.replace(/\W/g,function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "});i=s.charAt(t);r=s.slice(0,t);i&&i.match(/\S/)&&(r=r.replace(/\s\S+$/,""));r=h.rtrim(r);return(r+n).length>e.length?e:e.substring(0,r.length)+n},words:function(e,t){return h.trim(e,t).split(t||/\s+/)},pad:function(e,t,n,r){e+="";var i=0;t=~~t;n?n.length>1&&(n=n.charAt(0)):n=" ";switch(r){case"right":i=t-e.length;return e+s(n,i);case"both":i=t-e.length;return s(n,Math.ceil(i/2))+e+s(n,Math.floor(i/2));default:i=t-e.length;return s(n,i)+e}},lpad:function(e,t,n){return h.pad(e,t,n)},rpad:function(e,t,n){return h.pad(e,t,n,"right")},lrpad:function(e,t,n){return h.pad(e,t,n,"both")},sprintf:c,vsprintf:function(e,t){t.unshift(e);return c.apply(null,t)},toNumber:function(e,t){e+="";var n=i(i(e).toFixed(~~t));return n===0&&!e.match(/^0+$/)?Number.NaN:n},strRight:function(e,t){e+="";t=t!=null?""+t:t;var n=t?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strRightBack:function(e,t){e+="";t=t!=null?""+t:t;var n=t?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strLeft:function(e,t){e+="";t=t!=null?""+t:t;var n=t?e.indexOf(t):-1;return~n?e.slice(0,n):e},strLeftBack:function(e,t){e+="";t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n){t||(t=", ");n||(n=" and ");var r=e.length,i="";for(var s=0;s<r;s++){i+=e[s];s===r-2?i+=n:s<r-1&&(i+=t)}return i},slugify:function(e){var t="ąàáäâãćęèéëêìíïîłńòóöôõùúüûñçżź",n="aaaaaaceeeeeiiiilnooooouuuunczz",r=new RegExp(u(t),"g");e=(""+e).toLowerCase();e=e.replace(r,function(e){var r=t.indexOf(e);return n.charAt(r)||"-"});return h.trim(e.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||~h.words("include contains reverse").indexOf(t))continue;e[t]=this[t]}return e},repeat:s};h.strip=h.trim;h.lstrip=h.ltrim;h.rstrip=h.rtrim;h.center=h.lrpad;h.rjust=h.lpad;h.ljust=h.rpad;h.contains=h.include;if(typeof exports!="undefined"){typeof module!="undefined"&&module.exports&&(module.exports=h);exports._s=h}else if(typeof define=="function"&&define.amd)define("underscore.string",function(){return h});else{e._=e._||{};e._.string=e._.str=h}})(this||window);