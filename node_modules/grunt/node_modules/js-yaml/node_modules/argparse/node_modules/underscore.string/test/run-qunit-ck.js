function waitFor(e,t,n){var r,i=(new Date).getTime();setInterval(function s(){if((new Date).getTime()-i<n&&!r)r=e();else if(!r)phantom.exit(1);else{t();clearInterval(s)}},100)}var fs=require("fs"),page=require("webpage").create(),url="file://localhost"+fs.workingDirectory+"/"+phantom.args[0];page.onConsoleMessage=function(e){console.log(e)};page.open(url,function(e){waitFor(function(){return page.evaluate(function(){var e=document.getElementById("qunit-testresult");return e&&e.innerText.match("completed")})},function(){var e=page.evaluate(function(){var e=document.getElementById("qunit-testresult"),t=document.getElementsByClassName("fail");for(var n=0;n<t.length;n++)console.log(t[n].innerText);console.log(e.innerText);return parseInt(e.getElementsByClassName("failed")[0].innerHTML)});phantom.exit(e>0?1:0)},1e4)});