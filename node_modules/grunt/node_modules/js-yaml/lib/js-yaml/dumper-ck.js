"use strict";function kindOf(e){var t=typeof e;return null===e?"null":"number"===t?0===e%1?"integer":"float":"object"===t&&Array.isArray(e)?"array":t}function compileStyleMap(e,t){var n,r,i,s,o,u,a;if(null===t)return{};n={};r=Object.keys(t);for(i=0,s=r.length;i<s;i+=1){o=r[i];u=String(t[o]);"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2));a=e.compiledTypeMap[o];a&&a.dumper&&_hasOwnProperty.call(a.dumper.styleAliases,u)&&(u=a.dumper.styleAliases[u]);n[o]=u}return n}function encodeHex(e){var t,n,r;t=e.toString(16).toUpperCase();if(e<=255){n="x";r=2}else if(e<=65535){n="u";r=4}else{if(!(e<=4294967295))throw new YAMLException("code point within a string may not be greater than 0xFFFFFFFF");n="U";r=8}return"\\"+n+common.repeat("0",r-t.length)+t}function dump(e,t){function c(e){return"\n"+common.repeat(" ",r*e)}function h(e){var t,n,r;for(t=0,n=o.length;t<n;t+=1){r=o[t];if(null!==r.loader&&NIL!==r.loader.resolver(e,!1))return!0}return!1}function p(e){var t,n,r,i,s;l="";t=!1;n=0;if(0===e.length||CHAR_SPACE===e.charCodeAt(0)||CHAR_SPACE===e.charCodeAt(e.length-1))t=!0;for(r=0,i=e.length;r<i;r+=1){s=e.charCodeAt(r);!t&&(CHAR_TAB===s||CHAR_LINE_FEED===s||CHAR_CARRIAGE_RETURN===s||CHAR_COMMA===s||CHAR_LEFT_SQUARE_BRACKET===s||CHAR_RIGHT_SQUARE_BRACKET===s||CHAR_LEFT_CURLY_BRACKET===s||CHAR_RIGHT_CURLY_BRACKET===s||CHAR_SHARP===s||CHAR_AMPERSAND===s||CHAR_ASTERISK===s||CHAR_EXCLAMATION===s||CHAR_VERTICAL_LINE===s||CHAR_GREATER_THAN===s||CHAR_SINGLE_QUOTE===s||CHAR_DOUBLE_QUOTE===s||CHAR_PERCENT===s||CHAR_COMMERCIAL_AT===s||CHAR_GRAVE_ACCENT===s||CHAR_QUESTION===s||CHAR_COLON===s||CHAR_MINUS===s)&&(t=!0);if(ESCAPE_SEQUENCES[s]||!(32<=s&&s<=126||133===s||160<=s&&s<=55295||57344<=s&&s<=65533||65536<=s&&s<=1114111)){l+=e.slice(n,r);l+=ESCAPE_SEQUENCES[s]||encodeHex(s);n=r+1;t=!0}}n<r&&(l+=e.slice(n,r));!t&&h(l)&&(t=!0);t&&(l='"'+l+'"')}function d(e,t){var n="",r=f,i,s;for(i=0,s=t.length;i<s;i+=1){0!==i&&(n+=", ");b(e,t[i],!1,!1);n+=l}f=r;l="["+n+"]"}function v(e,t,n){var r="",i=f,s,o;for(s=0,o=t.length;s<o;s+=1){if(!n||0!==s)r+=c(e);b(e+1,t[s],!0,!0);r+="- "+l}f=i;l=r}function m(e,t){var n="",r=f,i=Object.keys(t),s,o,u,a;for(s=0,o=i.length;s<o;s+=1){0!==s&&(n+=", ");u=i[s];a=t[u];b(e,u,!1,!1);l.length>1024&&(n+="? ");n+=l+": ";b(e,a,!1,!1);n+=l}f=r;l="{"+n+"}"}function g(e,t,n){var r="",i=f,s=Object.keys(t),o,u,a,h,p;for(o=0,u=s.length;o<u;o+=1){if(!n||0!==o)r+=c(e);a=s[o];h=t[a];b(e+1,a,!0,!0);p=null!==f&&"?"!==f&&l.length<=1024;p&&(r+="? ");r+=l;p&&(r+=c(e));b(e+1,h,!0,p);r+=": "+l}f=i;l=r}function y(e,t){var n,r,i,c,h,p;r=t?u:o;a=kindOf(e);for(i=0,c=r.length;i<c;i+=1){h=r[i];if(null!==h.dumper&&(null===h.dumper.kind||a===h.dumper.kind)&&(null===h.dumper.instanceOf||e instanceof h.dumper.instanceOf)&&(null===h.dumper.predicate||h.dumper.predicate(e))){f=t?h.tag:"?";if(null!==h.dumper.representer){p=s[h.tag]||h.dumper.defaultStyle;if("function"==typeof h.dumper.representer)n=h.dumper.representer(e,p);else{if(!_hasOwnProperty.call(h.dumper.representer,p))throw new YAMLException("!<"+h.tag+'> tag resolver accepts not "'+p+'" style');n=h.dumper.representer[p](e,p)}if(NIL===n){if(t)throw new YAMLException("cannot represent an object of !<"+h.tag+"> type");continue}a=kindOf(n);l=n}return!0}}return!1}function b(e,t,n,s){f=null;l=t;y(t,!1)||y(t,!0);n&&(n=0>i||i>e);if(null!==f&&"?"!==f||2!==r&&e>0)s=!1;if("object"===a)n&&0!==Object.keys(l).length?g(e,l,s):m(e,l);else if("array"===a)n&&0!==l.length?v(e,l,s):d(e,l);else{if("string"!==a)throw new YAMLException("unacceptabe kind of an object to dump ("+a+")");"?"!==f&&p(l)}null!==f&&"?"!==f&&(l="!<"+f+"> "+l)}t=t||{};var n=t.schema||DEFAULT_SCHEMA,r=Math.max(1,t.indent||2),i=common.isNothing(t.flowLevel)?-1:t.flowLevel,s=compileStyleMap(n,t.styles||null),o=n.compiledImplicit,u=n.compiledExplicit,a,f,l;b(0,e,!0,!0);return l+"\n"}function safeDump(e,t){return dump(e,common.extend({schema:SAFE_SCHEMA},t))}var common=require("./common"),NIL=common.NIL,YAMLException=require("./exception"),DEFAULT_SCHEMA=require("./schema/default"),SAFE_SCHEMA=require("./schema/safe"),_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";module.exports.dump=dump;module.exports.safeDump=safeDump;