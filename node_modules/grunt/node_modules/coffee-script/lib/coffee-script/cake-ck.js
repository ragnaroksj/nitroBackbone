// Generated by CoffeeScript 1.3.3
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;r=require("fs");f=require("path");i=require("./helpers");a=require("./optparse");e=require("./coffee-script");h={};u={};c=[];o=null;i.extend(global,{task:function(e,t,n){var r;n||(r=[t,n],n=r[0],t=r[1]);return h[e]={name:e,description:t,action:n}},option:function(e,t,n){return c.push([e,t,n])},invoke:function(e){h[e]||s(e);return h[e].action(u)}});exports.run=function(){var i,s,f,h,p,d;global.__originalDirname=r.realpathSync(".");process.chdir(t(__originalDirname));s=process.argv.slice(2);e.run(r.readFileSync("Cakefile").toString(),{filename:"Cakefile"});o=new a.OptionParser(c);if(!s.length)return l();try{u=o.parse(s)}catch(v){return n(""+v)}p=u.arguments;d=[];for(f=0,h=p.length;f<h;f++){i=p[f];d.push(invoke(i))}return d};l=function(){var e,t,n,r,i,s;r=f.relative||f.resolve;e=f.join(r(__originalDirname,process.cwd()),"Cakefile");console.log(""+e+" defines the following tasks:\n");for(n in h){s=h[n];i=20-n.length;i=i>0?Array(i+1).join(" "):"";t=s.description?"# "+s.description:"";console.log("cake "+n+i+" "+t)}if(c.length)return console.log(o.help())};n=function(e){console.error(e+"\n");console.log('To see a list of all tasks/options, run "cake"');return process.exit(1)};s=function(e){return n("No such task: "+e)};t=function(e){var n;if(f.existsSync(f.join(e,"Cakefile")))return e;n=f.normalize(f.join(e,".."));if(n!==e)return t(n);throw new Error("Cakefile not found in "+process.cwd())}}).call(this);