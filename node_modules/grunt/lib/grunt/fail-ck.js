/*
 * grunt
 * http://gruntjs.com/
 *
 * Copyright (c) 2014 "Cowboy" Ben Alman
 * Licensed under the MIT license.
 * https://github.com/gruntjs/grunt/blob/master/LICENSE-MIT
 */"use strict";function writeln(e,t){grunt.log.muted=!1;var n=String(e.message||e);grunt.option("no-color")||(n+="");if(t==="warn"){n="Warning: "+n+" ";n+=grunt.option("force")?"Used --force, continuing.".underline:"Use --force to continue.";n=n.yellow}else n=("Fatal error: "+n).red;grunt.log.writeln(n)}function dumpStack(e){grunt.option("stack")&&(e.origError&&e.origError.stack?console.log(e.origError.stack):e.stack&&console.log(e.stack))}var grunt=require("../grunt"),fail=module.exports={};fail.code={FATAL_ERROR:1,MISSING_GRUNTFILE:2,TASK_FAILURE:3,TEMPLATE_ERROR:4,INVALID_AUTOCOMPLETE:5,WARNING:6};fail.fatal=function(e,t){writeln(e,"fatal");dumpStack(e);grunt.util.exit(typeof t=="number"?t:fail.code.FATAL_ERROR)};fail.errorcount=0;fail.warncount=0;fail.warn=function(e,t){var n=typeof e=="string"?e:e.message;fail.warncount++;writeln(n,"warn");if(!grunt.option("force")){dumpStack(e);grunt.log.writeln().fail("Aborted due to warnings.");grunt.util.exit(typeof t=="number"?t:fail.code.WARNING)}};fail.report=function(){fail.warncount>0?grunt.log.writeln().fail("Done, but with warnings."):grunt.log.writeln().success("Done, without errors.")};